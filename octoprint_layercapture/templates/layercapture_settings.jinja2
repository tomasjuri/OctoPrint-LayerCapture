<form class="form-horizontal">
    <div class="control-group">
        <h4>{{ _("3D Grid Configuration") }}</h4>
        <span class="help-block">{{ _("Configure a true 3D grid with separate settings for each axis (X, Y, Z)") }}</span>
    </div>
    
    <!-- Grid Center Positions -->
    <div class="control-group">
        <h5>{{ _("Grid Center Position") }}</h5>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Grid Center X (mm)") }}</label>
        <div class="controls">
            <input type="number" step="0.1" class="input-block-level" data-bind="value: settings.plugins.layercapture.grid_center_x">
            <span class="help-block">{{ _("X coordinate of the grid center on the print bed") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Grid Center Y (mm)") }}</label>
        <div class="controls">
            <input type="number" step="0.1" class="input-block-level" data-bind="value: settings.plugins.layercapture.grid_center_y">
            <span class="help-block">{{ _("Y coordinate of the grid center on the print bed") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Grid Center Z (mm)") }}</label>
        <div class="controls">
            <input type="number" step="0.1" class="input-block-level" data-bind="value: settings.plugins.layercapture.grid_center_z">
            <span class="help-block">{{ _("Z offset relative to current layer for grid center (0 = at layer height + base offset)") }}</span>
        </div>
    </div>
    
    <!-- Grid Sizes -->
    <div class="control-group">
        <h5>{{ _("Grid Dimensions") }}</h5>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Grid Size X") }}</label>
        <div class="controls">
            <select class="input-block-level" data-bind="value: settings.plugins.layercapture.grid_size_x">
                <option value="1">1 position</option>
                <option value="3">3 positions</option>
                <option value="5">5 positions</option>
                <option value="7">7 positions</option>
            </select>
            <span class="help-block">{{ _("Number of capture positions along X-axis") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Grid Size Y") }}</label>
        <div class="controls">
            <select class="input-block-level" data-bind="value: settings.plugins.layercapture.grid_size_y">
                <option value="1">1 position</option>
                <option value="3">3 positions</option>
                <option value="5">5 positions</option>
                <option value="7">7 positions</option>
            </select>
            <span class="help-block">{{ _("Number of capture positions along Y-axis") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Grid Size Z") }}</label>
        <div class="controls">
            <select class="input-block-level" data-bind="value: settings.plugins.layercapture.grid_size_z">
                <option value="1">1 position (single height)</option>
                <option value="2">2 positions</option>
                <option value="3">3 positions</option>
                <option value="5">5 positions</option>
            </select>
            <span class="help-block">{{ _("Number of capture positions along Z-axis (different heights above print)") }}</span>
        </div>
    </div>
    
    <!-- Grid Spacing -->
    <div class="control-group">
        <h5>{{ _("Grid Spacing") }}</h5>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("X Spacing (mm)") }}</label>
        <div class="controls">
            <input type="number" step="1" class="input-block-level" data-bind="value: settings.plugins.layercapture.grid_spacing_x">
            <span class="help-block">{{ _("Distance between grid points in X direction (default: 20mm)") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Y Spacing (mm)") }}</label>
        <div class="controls">
            <input type="number" step="1" class="input-block-level" data-bind="value: settings.plugins.layercapture.grid_spacing_y">
            <span class="help-block">{{ _("Distance between grid points in Y direction (default: 20mm)") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Z Spacing (mm)") }}</label>
        <div class="controls">
            <input type="number" step="0.5" class="input-block-level" data-bind="value: settings.plugins.layercapture.grid_spacing_z">
            <span class="help-block">{{ _("Distance between grid points in Z direction (default: 5mm)") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Base Z Offset (mm)") }}</label>
        <div class="controls">
            <input type="number" step="0.1" class="input-block-level" data-bind="value: settings.plugins.layercapture.z_offset_base">
            <span class="help-block">{{ _("Base distance above the print surface for all capture positions (default: 5mm)") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <h4>{{ _("Print Bed Dimensions") }}</h4>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Bed Width (mm)") }}</label>
        <div class="controls">
            <input type="number" step="1" class="input-block-level" data-bind="value: settings.plugins.layercapture.bed_width">
            <span class="help-block">{{ _("Width of your printer bed for boundary checking") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Bed Height (mm)") }}</label>
        <div class="controls">
            <input type="number" step="1" class="input-block-level" data-bind="value: settings.plugins.layercapture.bed_height">
            <span class="help-block">{{ _("Height of your printer bed for boundary checking") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <h4>{{ _("Layer Capture Settings") }}</h4>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Capture Every N Layers") }}</label>
        <div class="controls">
            <input type="number" min="1" step="1" class="input-block-level" data-bind="value: settings.plugins.layercapture.capture_every_n_layers">
            <span class="help-block">{{ _("Capture images every N layers (e.g., 10 = every 10th layer)") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Minimum Layer Height (mm)") }}</label>
        <div class="controls">
            <input type="number" step="0.01" class="input-block-level" data-bind="value: settings.plugins.layercapture.min_layer_height">
            <span class="help-block">{{ _("Minimum layer height for layer calculation") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <h4>{{ _("Camera Settings") }}</h4>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Use Fake Camera") }}</label>
        <div class="controls">
            <input type="checkbox" data-bind="checked: settings.plugins.layercapture.use_fake_camera">
            <span class="help-block">{{ _("Enable for testing without a real camera (creates dummy image files)") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Capture Delay (seconds)") }}</label>
        <div class="controls">
            <input type="number" min="0" step="0.5" class="input-block-level" data-bind="value: settings.plugins.layercapture.capture_delay">
            <span class="help-block">{{ _("Wait time between movement and image capture") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Pre-Capture Delay (seconds)") }}</label>
        <div class="controls">
            <input type="number" min="0" max="5" step="0.1" class="input-block-level" data-bind="value: settings.plugins.layercapture.pre_capture_delay">
            <span class="help-block">{{ _("Additional delay before taking snapshot for camera stabilization") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Create Thumbnails") }}</label>
        <div class="controls">
            <input type="checkbox" data-bind="checked: settings.plugins.layercapture.create_thumbnails">
            <span class="help-block">{{ _("Create small thumbnail images for web viewing (requires PIL/Pillow)") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Image Quality") }}</label>
        <div class="controls">
            <input type="number" min="1" max="100" step="1" class="input-block-level" data-bind="value: settings.plugins.layercapture.image_quality">
            <span class="help-block">{{ _("JPEG image quality (1-100, higher = better quality, larger files)") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Return to Origin") }}</label>
        <div class="controls">
            <input type="checkbox" data-bind="checked: settings.plugins.layercapture.return_to_origin">
            <span class="help-block">{{ _("Return print head to original position after capture sequence") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <h4>{{ _("G-code and Movement Settings") }}</h4>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Movement Speed (mm/min)") }}</label>
        <div class="controls">
            <input type="number" min="100" max="10000" step="100" class="input-block-level" data-bind="value: settings.plugins.layercapture.movement_speed">
            <span class="help-block">{{ _("Speed for print head movements during capture (default: 3000)") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Pause/Resume Timeout (seconds)") }}</label>
        <div class="controls">
            <input type="number" min="5" max="30" step="1" class="input-block-level" data-bind="value: settings.plugins.layercapture.pause_timeout">
            <span class="help-block">{{ _("Timeout for pause and resume operations (default: 10)") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Movement Timeout (seconds)") }}</label>
        <div class="controls">
            <input type="number" min="1" max="10" step="1" class="input-block-level" data-bind="value: settings.plugins.layercapture.movement_timeout">
            <span class="help-block">{{ _("Wait time after movement commands (default: 5)") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Emergency Resume Attempts") }}</label>
        <div class="controls">
            <input type="number" min="1" max="5" step="1" class="input-block-level" data-bind="value: settings.plugins.layercapture.emergency_resume_attempts">
            <span class="help-block">{{ _("Number of attempts to resume print in emergency (default: 3)") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <h4>{{ _("File Management") }}</h4>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Capture Folder") }}</label>
        <div class="controls">
            <input type="text" class="input-block-level" data-bind="value: settings.plugins.layercapture.capture_folder">
            <span class="help-block">{{ _("Folder name within uploads directory for storing captured images") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Save Metadata") }}</label>
        <div class="controls">
            <input type="checkbox" data-bind="checked: settings.plugins.layercapture.save_metadata">
            <span class="help-block">{{ _("Save JSON metadata files with capture information") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Calibration File Path (JSON)") }}</label>
        <div class="controls">
            <input type="text" class="input-block-level" data-bind="value: settings.plugins.layercapture.calibration_file_path">
            <span class="help-block">{{ _("Path to the calibration JSON file for this print. This will be included in the metadata.") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <h4>{{ _("Safety Settings") }}</h4>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Maximum Z Height (mm)") }}</label>
        <div class="controls">
            <input type="number" step="1" class="input-block-level" data-bind="value: settings.plugins.layercapture.max_z_height">
            <span class="help-block">{{ _("Maximum Z height limit for safety") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">{{ _("Boundary Margin (mm)") }}</label>
        <div class="controls">
            <input type="number" step="0.5" class="input-block-level" data-bind="value: settings.plugins.layercapture.boundary_margin">
            <span class="help-block">{{ _("Safety margin from bed edges") }}</span>
        </div>
    </div>
    
    <div class="control-group">
        <h4>{{ _("Status") }}</h4>
    </div>
    
    <div class="control-group">
        <div class="controls">
            <div class="layercapture-status" data-bind="css: { 'active': captureInProgress, 'inactive': !captureInProgress() }">
                <strong>{{ _("Capture Status:") }}</strong>
                <span data-bind="text: captureInProgress() ? 'Active' : 'Inactive'"></span>
            </div>
            <div class="layercapture-info">
                <strong>{{ _("Current Layer:") }}</strong> <span data-bind="text: currentLayer"></span><br>
                <strong>{{ _("Target Layers:") }}</strong> <span data-bind="text: targetLayers().join(', ') || 'None'"></span><br>
                <strong>{{ _("Current File:") }}</strong> <span data-bind="text: currentGcodeFile || 'None'"></span>
            </div>
        </div>
    </div>
    
    <div class="control-group">
        <h4>{{ _("Preview") }}</h4>
    </div>
    
    <div class="control-group">
        <div class="controls">
            <button type="button" class="btn btn-primary" data-bind="click: showGridPreview">
                {{ _("Show Grid Preview") }}
            </button>
            <span class="help-block">{{ _("Preview the grid positions that will be used for capture") }}</span>
        </div>
    </div>
</form> 